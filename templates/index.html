<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Energy Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>MonitorizaÃ§Ã£o de InstalaÃ§Ãµes Solares - AdEPorto</h1>
    <div id="weather-widget">
		<span id="weather-icon">ğŸŒ¤ï¸</span>
		<span id="weather">--Â°C</span>
		<span id="humidity">ğŸ’§ --%</span>
		<span id="date-icon">ğŸ—“ </span>
		<span id="date">--/--/----</span>
		<span id="time-icon">ğŸ• </span>
		<span id="time">--:--</span>
	  </div>
	  <div id="update-widget">
		<div class="update-line">
		  <span id="update-icon">ğŸ“Š</span>
		  <span id="update-label">Ãšltima AtualizaÃ§Ã£o:</span>
		  <span id="last-updated-time">--/--/---- --:--:--</span>
		</div>
		<div class="update-line">
		  <span id="connection-indicator">ğŸŸ¢</span>
		  <span id="connection-text">Conectado</span>
		  <span id="update-separator">|</span>
		  <span id="update-indicator">ğŸ”„</span>
		  <span id="next-update-countdown">PrÃ³xima AtualizaÃ§Ã£o: --:--</span>
		</div>
	  </div>
	</header>
  <div id="loading-overlay">
    <div class="spinner"></div>
    <div id="loading-text">A carregar dados, aguarde por favor... â³</div>
  </div>
  <div class="content-wrapper">
    <!-- KPI Cards -->
    <section class="cards">
	  <div class="card" id="prod">
		<div class="kpi-label">â˜€ï¸ ProduÃ§Ã£o Atual</div>
		<div class="kpi-value">
		  <span class="value">--</span><span class="unit"> kW</span>
		</div>
	  </div>

	  <div class="card" id="cons">
		<div class="kpi-label">âš¡ Consumo Atual</div>
		<div class="kpi-value">
		  <span class="value">--</span><span class="unit"> kW</span>
		</div>
	  </div>

	  <div class="card" id="grid">
		<div class="kpi-label">ğŸ”Œ Energia da Rede</div>
		<div class="kpi-value">
		  <span class="value">--</span><span class="unit"> kW</span>
		</div>
	  </div>

	  <div class="card" id="plants">
		<div class="kpi-label">ğŸ  InstalaÃ§Ãµes Monitorizadas</div>
		<div class="kpi-value">
		  <span class="value">--</span>
		</div>
	  </div>
	</section>

    <!-- Chart + Alerts -->
    <section class="main-section">
      <div id="chart-container" style="width:100%; height:400px;">
		<canvas id="energyChart"></canvas>
      </div>
      <div id="alerts">
		<h2>âš ï¸ MonitorizaÃ§Ã£o</h2>
		<ul id="alertsList"></ul>
	  </div>
	</section>

    <!-- Table -->
    <section>
	  <div class="table-wrapper">
		<table>
		  <thead>
			<tr>
			  <th>InstalaÃ§Ã£o</th>
			  <th>PotÃªncia Instalada (kWp)</th>
			  <th>ProduÃ§Ã£o (kW)</th>
			  <th>Consumo da Rede (kW)</th>
			  <th>Consumo Total (kW)</th>
			  <th>Excedente (kW)</th>
			  <th>Ãšltimos Dados</th>
			  <th>Status</th>
			</tr>
      </thead>
      <tbody id="buildingTable"></tbody>
    </table>
  </div>
</section>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>


