<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Energy Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Monitorização de Instalações Solares - AdEPorto</h1>
    <div id="weather-widget">
		<span id="weather-icon">🌤️</span>
		<span id="weather">--°C</span>
		<span id="humidity">💧 --%</span>
		<span id="date-icon">📅 </span>
		<span id="date">--/--/----</span>
		<span id="time-icon">🕒 </span>
		<span id="time">--:--</span>
	  </div>
	</header>
  <div id="loading-overlay">
    <div class="spinner"></div>
    <div id="loading-text">A carregar dados, aguarde por favor... ⏳</div>
  </div>
  <div class="content-wrapper">
    <!-- KPI Cards -->
    <section class="cards">
	  <div class="card" id="prod">
		<div class="kpi-label">☀️ Produção Atual</div>
		<div class="kpi-value">
		  <span class="value">--</span><span class="unit"> kW</span>
		</div>
	  </div>

	  <div class="card" id="cons">
		<div class="kpi-label">⚡ Consumo Atual</div>
		<div class="kpi-value">
		  <span class="value">--</span><span class="unit"> kW</span>
		</div>
	  </div>

	  <div class="card" id="grid">
		<div class="kpi-label">🔌 Energia da Rede</div>
		<div class="kpi-value">
		  <span class="value">--</span><span class="unit"> kW</span>
		</div>
	  </div>

	  <div class="card" id="plants">
		<div class="kpi-label">🏠 Instalações Monitorizadas</div>
		<div class="kpi-value">
		  <span class="value">--</span>
		</div>
	  </div>
	</section>

    <!-- Chart + Alerts -->
    <section class="main-section">
      <div id="chart-container" style="width:100%; height:400px;">
		<canvas id="energyChart"></canvas>
      </div>
      <div id="alerts">
		<h2>⚠️ Monitorização</h2>
		<ul id="alertsList"></ul>
	  </div>
	</section>

    <!-- Table -->
    <section>
	  <div class="table-wrapper">
		<table>
		  <thead>
			<tr>
			  <th>Instalação</th>
			  <th>Potência Instalada (kWp)</th>
			  <th>Produção (kW)</th>
			  <th>Consumo (kW)</th>
			  <th>Energia Injetada (kW)</th>			  
			  <th>Excedente (kW)</th>
			  <th>Status</th>
			</tr>
      </thead>
      <tbody id="buildingTable"></tbody>
    </table>
  </div>
</section>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>

